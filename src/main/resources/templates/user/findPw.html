
<th:block th:replace="/user_inc/header :: headerFragment"></th:block>

<div class="container w-50 shadow rounded border p-5 mt-5">
    <form action="/user/findPw" method="post" name="product_input_form">

        <%--비밀번호 pannel --%>
        <div class="tab-content">
            <div id="findPwSuccess" style="display: none" class="px-4">
                <p class="text-center mt-4">
                    <small>해당 이메일로 임시 비밀번호를 보냈습니다.
                        로그인후 마이페이지에서 비밀번호를 변경하시기 바랍니다.
                    </small>
                </p>
                <a class="btn btn-primary mt-3 w-100" type="button" href="">로그인</a>
            </div>

            <div id="findPwBefore" class="px-4">
                <p>가입시 아이디와 이메일 입력하세요.</p>
                <input class="form-control mb-2" type="text" id="user_id" name="user_id" placeholder="아이디"/>
                <input class="form-control mb-2" type="text" id="user_email" name="user_email" placeholder="이메일"/>
                <input class="btn btn-primary mt-3 w-100" type="button" value="비밀번호 찾기" onclick="pwFind()"/>
            </div>
        </div>
    </form>
</div>

        <script>
            function pwFind(){
                let uid = $("#user_id").val();
                let uEmail = $("#user_email").val();
                let str = "";

                $.ajax({
                    url: "/user/findPw",
                    type: "post",
                    data: { "uid" : uid, "uEmail": uEmail } ,
                    success: function (data){ //datasms 찾기 실패시 0, 찾으면 해당 아이디값

                        if(data==0){
                            alert("아이디 및 이메일을 다시 확인하기 바랍니다.")
                        } else {
                            str = data;
                            console.log(data);
                            $("#findPwBefore").css("display", "none");
                            $("#findPwSuccess").css("display", "block");
                        }
                    },
                    error:function(){alert("비밀번호 찾기 요청에 실패하였습니다.")}
                });
            }



        </script>

        </script>




<th:block th:replace="/user_inc/footer :: scriptFragment"></th:block>